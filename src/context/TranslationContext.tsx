import React, { createContext, useContext, useEffect, useMemo, useState } from 'react';

export type Lang = 'fr' | 'en' | 'pt';
type Dict = Record<Lang, Record<string, string>>;

const LANG_STORAGE_KEY = 'lang';

const DICT: Dict = {
  fr: {
    appSlogan: "La plateforme qui centralise et s√©curise vos transports B2B, de la demande au suivi.",
    heroBadge: "Plateforme de transport de confiance",
    ctaStart: "Commencer maintenant",
    ctaLogin: "Se connecter",

    trust1: "Validation manuelle des utilisateurs",
    trust2: "Paiements s√©curis√©s",
    trust3: "Support client 24/7",

    whyTitle: "Pourquoi choisir",
    whyDesc: "Une plateforme compl√®te qui simplifie la gestion de vos transports, avec des partenaires v√©rifi√©s et un suivi en temps r√©el.",

    feature1Title: "Transport Professionnel",
    feature1Desc: "R√©seau de partenaires transporteurs qualifi√©s et v√©rifi√©s pour tous vos besoins.",
    feature2Title: "Plateforme S√©curis√©e",
    feature2Desc: "Validation manuelle des utilisateurs et paiements s√©curis√©s pour votre tranquillit√©.",
    feature3Title: "Suivi Complet",
    feature3Desc: "Suivez vos demandes en temps r√©el depuis la cr√©ation jusqu'√† la livraison.",

    howTitle: "Comment √ßa marche",
    step1Title: "1. Cr√©ez votre demande",
    step1Desc: "Saisissez l‚Äôorigine, la destination, les dates et les sp√©cificit√©s de la marchandise.",
    step2Title: "2. Recevez des offres",
    step2Desc: "Les partenaires valid√©s proposent leurs tarifs en fonction de vos crit√®res.",
    step3Title: "3. Validez et payez",
    step3Desc: "Choisissez l‚Äôoffre, payez en toute s√©curit√©, la mission est lanc√©e.",
    step4Title: "4. Suivi & preuve de livraison",
    step4Desc: "Suivi en temps r√©el, photos de chargement/livraison, statut √† chaque √©tape.",

    statMissions: "Missions d√©j√† r√©alis√©es",
    statSatisfaction: "Satisfaction client",
    statAverageAssignment: "Attribution moyenne",

    testiRole1: "Responsable logistique",
    testiRole2: "Op√©rateur 3PL",
    testi1: "Process simple, offres rapides, et un vrai suivi ‚Äî on a gagn√© des heures chaque semaine.",
    testi2: "Le contr√¥le des acc√®s et le suivi photo ont nettement r√©duit nos litiges.",

    faqTitle: "Questions fr√©quentes",
    faq1Q: "Qui sont les transporteurs partenaires ?",
    faq1A: "Des entreprises v√©rifi√©es manuellement : KYC, assurances et conformit√© sont exig√©s avant l‚Äôacc√®s.",
    faq2Q: "Comment sont s√©curis√©s les paiements ?",
    faq2A: "Nous travaillons avec des prestataires reconnus. Les fonds sont trac√©s et les remboursements g√©r√©s selon les conditions.",
    faq3Q: "Puis-je suivre ma marchandise en temps r√©el ?",
    faq3A: "Oui. Vous voyez les statuts cl√©s et pouvez exiger des preuves (photos) √† chaque √©tape.",

    footerSubtitle: "Transport professionnel",
    allRightsReserved: "Tous droits r√©serv√©s",
    hello: "Bonjour",
    logout: "D√©connexion",
    loginTitle: "Connexion",
    loginSubtitle: "Connectez-vous √† votre compte {brand}",
    labelEmail: "Email",
    labelPassword: "Mot de passe",
    placeholderEmail: "votre@email.com",
    placeholderPassword: "‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢",
    btnLogin: "Se connecter",
    btnLoggingIn: "Connexion...",
    forgotPassword: "Mot de passe oubli√© ?",
    noAccount: "Pas encore de compte ?",
    createAccount: "Cr√©er un compte",

    toastLoginSuccessTitle: "Connexion r√©ussie",
    toastLoginSuccessDesc: "Bienvenue sur {brand} üöö",
    toastLoginErrorTitle: "Erreur de connexion",
    toastLoginErrorDefault: "Une erreur est survenue.",

    errEmailInvalid: "Email invalide",
    errPasswordRequired: "Le mot de passe est requis",
    errProfileNotFound: "Profil utilisateur introuvable.",
    errUnknownRole: "R√¥le utilisateur inconnu.",
    signupTitle: "Cr√©er un compte",
    signupSubtitle: "Rejoignez la plateforme et commencez d√®s maintenant",
    labelConfirmPassword: "Confirmer le mot de passe",
    labelFirstName: "Pr√©nom",
    labelLastName: "Nom",
    labelPhone: "Num√©ro de t√©l√©phone",
    placeholderPhone: "+33 6 12 34 56 78",

    accountType: "Type de compte",
    roleClientTitle: "Client",
    roleClientDesc: "Faire une demande de transport",
    rolePartnerTitle: "Partenaire",
    rolePartnerDesc: "Proposer vos offres de transport",

    companyInfoTitle: "Informations de l‚Äôentreprise",
    labelCompany: "Nom de l‚Äôentreprise",
    labelBusinessAddress: "Adresse",
    labelCity: "Ville",
    labelSiret: "Num√©ro SIRET",
    labelVatOptional: "Num√©ro TVA (facultatif)",

    btnCreate: "Cr√©er un compte",
    btnCreating: "Cr√©ation en cours...",
    haveAccount: "Vous avez d√©j√† un compte ?",
    actionLogin: "Se connecter",

    toastSignupSuccessTitle: "Compte cr√©√©",
    toastSignupSuccessDesc: "Un email de confirmation vous a √©t√© envoy√©.",
    toastSignupErrorTitle: "Erreur d'inscription",
    toastSignupErrorDefault: "Une erreur est survenue.",

    errPasswordMin: "Le mot de passe doit contenir au moins 6 caract√®res",
    errPasswordsDontMatch: "Les mots de passe ne correspondent pas",
    errFirstNameMin: "Le pr√©nom doit contenir au moins 2 caract√®res",
    errLastNameMin: "Le nom doit contenir au moins 2 caract√®res",
    errPhoneInvalid: "Num√©ro de t√©l√©phone invalide",
    errPartnerCompanyRequired: "Toutes les informations d'entreprise sont requises pour les partenaires",
    sidebarDashboard: "Tableau de bord",
    sidebarProfile: "Mon profil",
    sidebarNewRequest: "Nouvelle demande",
    sidebarMyRequests: "Mes demandes",
    sidebarMyTracking: "Mes transports",
    sidebarMyInvoices: "Mes factures",
    sidebarAvailableRequests: "Demandes disponibles",
    sidebarPartnerTransports: "Mes transports",
    sidebarPartnerTracking: "Suivi partenaire",
    sidebarPartnerInvoices: "Mes factures",
    sidebarAdminUsers: "Gestion utilisateurs",
    sidebarAdminRequests: "Toutes les demandes",
    sidebarAdminInvoices: "Toutes les factures",
    sidebarAdminAnalytics: "Analyses",

    roleClientLabel: "client",
    rolePartnerLabel: "partenaire",
    roleAdminLabel: "admin",

    loggingOut: "D√©connexion...",
    loading: "Chargement en cours...",
    dashboardTitle: "Tableau de bord",
    dashboardWelcome: "Bienvenue sur votre espace client",
    btnInvoices: "Factures",
    btnNewRequest: "Nouvelle demande",

    statOpenRequests: "Demandes en cours",
    statValidatedTransports: "Transports valid√©s",
    statTotalRevenue: "Chiffre d‚Äôaffaires total",
    statAllRequests: "Toutes mes demandes",

    tabOverview: "Tableau de bord",
    tabRequests: "Mes demandes",
    tabInvoices: "Mes factures",

    sectionMyTransports: "Mes transports",
    sectionMyTransportsDesc: "Suivi de vos transports r√©cents",
    sectionStats: "Statistiques",

    statusPending: "En attente",
    statusValidated: "Valid√©",
    statusApproved: "Approuv√©",
    statusInProgress: "En cours",
    statusCompleted: "Termin√©",
    profilePersonalInfo: "Informations personnelles",
    profileSecurity: "S√©curit√©",
    labelCityZip: "Ville / Code postal",
    labelVatNumber: "Num√©ro de TVA",

    securityChangeCredentials: "Modifier email / mot de passe",
    securityConfirmEmailPrompt: "Confirmez votre email",
    securityCurrentPasswordPrompt: "Mot de passe actuel",
    securityNewPasswordPrompt: "Nouveau mot de passe",
    securityUpdateSuccess: "Mise √† jour r√©ussie",
    securityUpdateErrorPrefix: "Erreur :",

    saveChanges: "Enregistrer les modifications",
    savingChanges: "Enregistrement...",
    newRequestTitle: "Nouvelle demande",

    pickupAddressLabel: "Adresse de prise en charge",
    destinationAddressLabel: "Adresse de destination",
    packageTypeLabel: "Type de colis",
    heightCm: "Hauteur (cm)",
    widthCm: "Largeur (cm)",
    depthCm: "Profondeur (cm)",
    weightKg: "Poids (kg)",
    pickupDateLabel: "Date de prise en charge",
    deliveryDateLabel: "Date de livraison",
    attachImageOptional: "Joindre une image (optionnel)",

    addressPlaceholder: "Adresse compl√®te",
    packageTypePlaceholder: "ex : palette, bo√Æte, caisse‚Ä¶",

    btnCalcDistancePrice: "Calculer la distance et le prix",
    btnCalculating: "Calcul en cours...",
    btnCreateRequest: "Cr√©er la demande",

    summaryTitle: "R√©sum√©",
    summaryDistance: "Distance",
    summaryVolume: "Volume",
    summaryEstimatedPrice: "Prix estim√©",

    toastUserNotConnected: "Utilisateur non connect√©",
    toastRouteError: "Erreur lors du calcul de l'itin√©raire",
    toastCreatedSuccess: "üéâ Votre demande a bien √©t√© cr√©√©e ! Vous pouvez la suivre dans l'onglet Mes transports.",
    toastCreateError: "Erreur lors de la cr√©ation de la demande",

    errPickupRequired: "L‚Äôadresse de prise en charge est requise",
    errDestinationRequired: "L‚Äôadresse de destination est requise",
    errPackageTypeRequired: "Le type de colis est requis",
    errHeightMin: "La hauteur doit √™tre sup√©rieure √† 0",
    errWidthMin: "La largeur doit √™tre sup√©rieure √† 0",
    errDepthMin: "La profondeur doit √™tre sup√©rieure √† 0",
    errWeightMin: "Le poids doit √™tre sup√©rieur √† 0",
    myTransportsTitle: "Mes transports",
    newTransportBtn: "Nouveau transport",

    emptyTitle: "Aucun transport",
    emptyDesc: "Vous n'avez pas encore de demandes de transport.",
    emptyCta: "Cr√©er ma premi√®re demande",

    transportNumberPrefix: "Transport #",
    labelDeparture: "D√©part",
    labelArrival: "Arriv√©e",
    labelType: "Type :",
    labelWeight: "Poids :",
    labelDistance: "Distance :",
    labelPrice: "Prix :",
    createdOn: "Cr√©√© le",
    follow: "Suivre",
    details: "D√©tails",
    notSpecified: "Non sp√©cifi√©",

    statusQuoted: "Devis√©",
    statusAccepted: "Accept√©",
    statusDelivered: "Livr√©",
    statusCancelled: "Annul√©",
    clientRequestsTitle: "Mes demandes",
    labelStatus: "Statut :",
    viewDetails: "Voir les d√©tails",
    toastRequestsLoadError: "Erreur lors du chargement des demandes",




  },
  en: {
    appSlogan: "The platform that centralizes and secures your B2B transport ‚Äî from request to delivery.",
    heroBadge: "Trusted transport platform",
    ctaStart: "Get started",
    ctaLogin: "Sign in",

    trust1: "Manual user validation",
    trust2: "Secure payments",
    trust3: "24/7 customer support",

    whyTitle: "Why choose",
    whyDesc: "A complete platform that simplifies your transport operations with vetted partners and real-time tracking.",

    feature1Title: "Professional Transport",
    feature1Desc: "A network of vetted carriers for all your needs.",
    feature2Title: "Secure Platform",
    feature2Desc: "Manual user approval and secure payments for peace of mind.",
    feature3Title: "End-to-End Tracking",
    feature3Desc: "Track each request in real time, from creation to delivery.",

    howTitle: "How it works",
    step1Title: "1. Create your request",
    step1Desc: "Enter origin, destination, dates and cargo specifications.",
    step2Title: "2. Receive quotes",
    step2Desc: "Approved partners submit offers tailored to your criteria.",
    step3Title: "3. Confirm & pay",
    step3Desc: "Pick an offer and pay securely; the job starts instantly.",
    step4Title: "4. Track & POD",
    step4Desc: "Live status, loading/delivery photos, and proof of delivery.",

    statMissions: "Jobs completed",
    statSatisfaction: "Customer satisfaction",
    statAverageAssignment: "Average assignment time",

    testiRole1: "Logistics Manager",
    testiRole2: "3PL Operator",
    testi1: "Simple process, quick quotes, real tracking ‚Äî we save hours every week.",
    testi2: "Access control and photo tracking markedly reduced disputes.",

    faqTitle: "Frequently asked questions",
    faq1Q: "Who are the carrier partners?",
    faq1A: "Companies manually vetted: KYC, insurance, and compliance are required before access.",
    faq2Q: "How are payments secured?",
    faq2A: "We rely on renowned providers. Funds are traceable and refunds follow clear terms.",
    faq3Q: "Can I track my shipment in real time?",
    faq3A: "Yes. You see key statuses and can require photo evidence at each step.",

    footerSubtitle: "Professional transport",
    allRightsReserved: "All rights reserved",
    hello: "Hello",
    logout: "Logout",
    loginTitle: "Sign in",
    loginSubtitle: "Sign in to your {brand} account",
    labelEmail: "Email",
    labelPassword: "Password",
    placeholderEmail: "your@email.com",
    placeholderPassword: "‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢",
    btnLogin: "Sign in",
    btnLoggingIn: "Signing in...",
    forgotPassword: "Forgot password?",
    noAccount: "Don‚Äôt have an account?",
    createAccount: "Create an account",

    toastLoginSuccessTitle: "Signed in",
    toastLoginSuccessDesc: "Welcome to {brand} üöö",
    toastLoginErrorTitle: "Sign-in error",
    toastLoginErrorDefault: "Something went wrong.",

    errEmailInvalid: "Invalid email",
    errPasswordRequired: "Password is required",
    errProfileNotFound: "User profile not found.",
    errUnknownRole: "Unknown user role.",
    signupTitle: "Create an account",
    signupSubtitle: "Join the platform and get started now",

    labelConfirmPassword: "Confirm password",
    labelFirstName: "First name",
    labelLastName: "Last name",
    labelPhone: "Phone number",
    placeholderPhone: "+44 7700 900000",

    accountType: "Account type",
    roleClientTitle: "Client",
    roleClientDesc: "Submit transport requests",
    rolePartnerTitle: "Partner",
    rolePartnerDesc: "Offer your transport services",

    companyInfoTitle: "Company information",
    labelCompany: "Company name",
    labelBusinessAddress: "Address",
    labelCity: "City",
    labelSiret: "SIRET number",
    labelVatOptional: "VAT number (optional)",

    btnCreate: "Create account",
    btnCreating: "Creating...",
    haveAccount: "Already have an account?",
    actionLogin: "Sign in",

    toastSignupSuccessTitle: "Account created",
    toastSignupSuccessDesc: "A confirmation email has been sent to you.",
    toastSignupErrorTitle: "Sign-up error",
    toastSignupErrorDefault: "Something went wrong.",

    errPasswordMin: "Password must be at least 6 characters",
    errPasswordsDontMatch: "Passwords do not match",
    errFirstNameMin: "First name must be at least 2 characters",
    errLastNameMin: "Last name must be at least 2 characters",
    errPhoneInvalid: "Invalid phone number",
    errPartnerCompanyRequired: "All company fields are required for partners",
    sidebarDashboard: "Dashboard",
    sidebarProfile: "My profile",
    sidebarNewRequest: "New request",
    sidebarMyRequests: "My requests",
    sidebarMyTracking: "My shipments",
    sidebarMyInvoices: "My invoices",
    sidebarAvailableRequests: "Available requests",
    sidebarPartnerTransports: "My transports",
    sidebarPartnerTracking: "Partner tracking",
    sidebarPartnerInvoices: "My invoices",
    sidebarAdminUsers: "User management",
    sidebarAdminRequests: "All requests",
    sidebarAdminInvoices: "All invoices",
    sidebarAdminAnalytics: "Analytics",

    roleClientLabel: "client",
    rolePartnerLabel: "partner",
    roleAdminLabel: "admin",

    loggingOut: "Signing out...",
    loading: "Loading...",
    dashboardTitle: "Dashboard",
    dashboardWelcome: "Welcome to your client area",
    btnInvoices: "Invoices",
    btnNewRequest: "New request",

    statOpenRequests: "Open requests",
    statValidatedTransports: "Validated transports",
    statTotalRevenue: "Total revenue",
    statAllRequests: "All my requests",

    tabOverview: "Overview",
    tabRequests: "My requests",
    tabInvoices: "My invoices",

    sectionMyTransports: "My shipments",
    sectionMyTransportsDesc: "Track your recent shipments",
    sectionStats: "Statistics",

    statusPending: "Pending",
    statusValidated: "Validated",
    statusApproved: "Approved",
    statusInProgress: "In progress",
    statusCompleted: "Completed",
    profilePersonalInfo: "Personal information",
    profileSecurity: "Security",
    labelCityZip: "City / Postal code",
    labelVatNumber: "VAT number",

    securityChangeCredentials: "Change email / password",
    securityConfirmEmailPrompt: "Confirm your email",
    securityCurrentPasswordPrompt: "Current password",
    securityNewPasswordPrompt: "New password",
    securityUpdateSuccess: "Updated successfully",
    securityUpdateErrorPrefix: "Error:",

    saveChanges: "Save changes",
    savingChanges: "Saving...",
    newRequestTitle: "New request",

    pickupAddressLabel: "Pickup address",
    destinationAddressLabel: "Destination address",
    packageTypeLabel: "Package type",
    heightCm: "Height (cm)",
    widthCm: "Width (cm)",
    depthCm: "Depth (cm)",
    weightKg: "Weight (kg)",
    pickupDateLabel: "Pickup date",
    deliveryDateLabel: "Delivery date",
    attachImageOptional: "Attach an image (optional)",

    addressPlaceholder: "Full address",
    packageTypePlaceholder: "e.g. pallet, box, crate‚Ä¶",

    btnCalcDistancePrice: "Calculate distance and price",
    btnCalculating: "Calculating...",
    btnCreateRequest: "Create request",

    summaryTitle: "Summary",
    summaryDistance: "Distance",
    summaryVolume: "Volume",
    summaryEstimatedPrice: "Estimated price",

    toastUserNotConnected: "User not signed in",
    toastRouteError: "Error while calculating the route",
    toastCreatedSuccess: "üéâ Your request has been created! You can track it in the My transports tab.",
    toastCreateError: "Error while creating the request",

    errPickupRequired: "Pickup address is required",
    errDestinationRequired: "Destination address is required",
    errPackageTypeRequired: "Package type is required",
    errHeightMin: "Height must be greater than 0",
    errWidthMin: "Width must be greater than 0",
    errDepthMin: "Depth must be greater than 0",
    errWeightMin: "Weight must be greater than 0",
    myTransportsTitle: "My transports",
    newTransportBtn: "New transport",

    emptyTitle: "No transports",
    emptyDesc: "You don‚Äôt have any transport requests yet.",
    emptyCta: "Create my first request",

    transportNumberPrefix: "Transport #",
    labelDeparture: "Departure",
    labelArrival: "Arrival",
    labelType: "Type:",
    labelWeight: "Weight:",
    labelDistance: "Distance:",
    labelPrice: "Price:",
    createdOn: "Created on",
    follow: "Track",
    details: "Details",
    notSpecified: "Not specified",

    statusQuoted: "Quoted",
    statusAccepted: "Accepted",
    statusDelivered: "Delivered",
    statusCancelled: "Cancelled",
    clientRequestsTitle: "My requests",
    labelStatus: "Status:",
    viewDetails: "View details",
    toastRequestsLoadError: "Error loading requests",





  },
  pt: {
    appSlogan: "A plataforma que centraliza e protege o seu transporte B2B ‚Äî do pedido √† entrega.",
    heroBadge: "Plataforma de transporte confi√°vel",
    ctaStart: "Come√ßar agora",
    ctaLogin: "Entrar",

    trust1: "Valida√ß√£o manual de utilizadores",
    trust2: "Pagamentos seguros",
    trust3: "Apoio ao cliente 24/7",

    whyTitle: "Por que escolher",
    whyDesc: "Uma plataforma completa que simplifica a gest√£o dos seus transportes, com parceiros verificados e rastreamento em tempo real.",

    feature1Title: "Transporte Profissional",
    feature1Desc: "Rede de transportadoras qualificadas e verificadas para todas as necessidades.",
    feature2Title: "Plataforma Segura",
    feature2Desc: "Aprova√ß√£o manual de utilizadores e pagamentos seguros para maior tranquilidade.",
    feature3Title: "Rastreamento Completo",
    feature3Desc: "Acompanhe cada pedido em tempo real, da cria√ß√£o √† entrega.",

    howTitle: "Como funciona",
    step1Title: "1. Crie o seu pedido",
    step1Desc: "Indique origem, destino, datas e especifica√ß√µes da carga.",
    step2Title: "2. Receba propostas",
    step2Desc: "Parceiros aprovados enviam ofertas conforme os seus crit√©rios.",
    step3Title: "3. Confirme e pague",
    step3Desc: "Escolha a oferta e pague com seguran√ßa; o servi√ßo inicia-se de imediato.",
    step4Title: "4. Acompanhe & comprovativo",
    step4Desc: "Estado em tempo real, fotos de carga/entrega e comprovativo de entrega.",

    statMissions: "Servi√ßos conclu√≠dos",
    statSatisfaction: "Satisfa√ß√£o do cliente",
    statAverageAssignment: "Tempo m√©dio de atribui√ß√£o",

    testiRole1: "Gestora de log√≠stica",
    testiRole2: "Operador 3PL",
    testi1: "Processo simples, propostas r√°pidas e rastreamento real ‚Äî poupamos horas por semana.",
    testi2: "Controlo de acesso e fotos reduziram bastante disputas.",

    faqTitle: "Perguntas frequentes",
    faq1Q: "Quem s√£o os parceiros transportadores?",
    faq1A: "Empresas verificadas manualmente: KYC, seguros e conformidade s√£o exigidos antes do acesso.",
    faq2Q: "Como os pagamentos s√£o protegidos?",
    faq2A: "Usamos provedores reconhecidos. Os fundos s√£o rastre√°veis e os reembolsos seguem termos claros.",
    faq3Q: "Posso rastrear a carga em tempo real?",
    faq3A: "Sim. Voc√™ v√™ estados chave e pode exigir fotos em cada etapa.",

    footerSubtitle: "Transporte profissional",
    allRightsReserved: "Todos os direitos reservados",
    hello: "Ol√°",
    logout: "Terminar sess√£o",
    loginTitle: "Iniciar sess√£o",
    loginSubtitle: "Entre na sua conta {brand}",
    labelEmail: "Email",
    labelPassword: "Palavra-passe",
    placeholderEmail: "o-seu@email.com",
    placeholderPassword: "‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢",
    btnLogin: "Entrar",
    btnLoggingIn: "A entrar...",
    forgotPassword: "Esqueceu a palavra-passe?",
    noAccount: "Ainda n√£o tem conta?",
    createAccount: "Criar conta",

    toastLoginSuccessTitle: "Sess√£o iniciada",
    toastLoginSuccessDesc: "Bem-vindo(a) ao {brand} üöö",
    toastLoginErrorTitle: "Erro ao iniciar sess√£o",
    toastLoginErrorDefault: "Ocorreu um erro.",

    errEmailInvalid: "Email inv√°lido",
    errPasswordRequired: "A palavra-passe √© obrigat√≥ria",
    errProfileNotFound: "Perfil de utilizador n√£o encontrado.",
    errUnknownRole: "Fun√ß√£o de utilizador desconhecida.",
    signupTitle: "Criar conta",
    signupSubtitle: "Junte-se √† plataforma e comece agora",

    labelConfirmPassword: "Confirmar palavra-passe",
    labelFirstName: "Nome",
    labelLastName: "Apelido",
    labelPhone: "N√∫mero de telefone",
    placeholderPhone: "+351 91 234 5678",

    accountType: "Tipo de conta",
    roleClientTitle: "Cliente",
    roleClientDesc: "Fazer pedidos de transporte",
    rolePartnerTitle: "Parceiro",
    rolePartnerDesc: "Oferecer servi√ßos de transporte",

    companyInfoTitle: "Informa√ß√µes da empresa",
    labelCompany: "Nome da empresa",
    labelBusinessAddress: "Morada",
    labelCity: "Cidade",
    labelSiret: "N√∫mero SIRET",
    labelVatOptional: "N√∫mero de IVA (opcional)",

    btnCreate: "Criar conta",
    btnCreating: "A criar...",
    haveAccount: "J√° tem conta?",
    actionLogin: "Iniciar sess√£o",

    toastSignupSuccessTitle: "Conta criada",
    toastSignupSuccessDesc: "Foi enviado um email de confirma√ß√£o.",
    toastSignupErrorTitle: "Erro ao criar conta",
    toastSignupErrorDefault: "Ocorreu um erro.",

    errPasswordMin: "A palavra-passe deve ter pelo menos 6 caracteres",
    errPasswordsDontMatch: "As palavras-passe n√£o coincidem",
    errFirstNameMin: "O nome deve ter pelo menos 2 caracteres",
    errLastNameMin: "O apelido deve ter pelo menos 2 caracteres",
    errPhoneInvalid: "N√∫mero de telefone inv√°lido",
    errPartnerCompanyRequired: "Todos os campos da empresa s√£o obrigat√≥rios para parceiros",
    sidebarDashboard: "Painel",
    sidebarProfile: "O meu perfil",
    sidebarNewRequest: "Novo pedido",
    sidebarMyRequests: "Os meus pedidos",
    sidebarMyTracking: "Os meus transportes",
    sidebarMyInvoices: "As minhas faturas",
    sidebarAvailableRequests: "Pedidos dispon√≠veis",
    sidebarPartnerTransports: "Os meus transportes",
    sidebarPartnerTracking: "Rastreio parceiro",
    sidebarPartnerInvoices: "As minhas faturas",
    sidebarAdminUsers: "Gest√£o de utilizadores",
    sidebarAdminRequests: "Todos os pedidos",
    sidebarAdminInvoices: "Todas as faturas",
    sidebarAdminAnalytics: "An√°lises",

    roleClientLabel: "cliente",
    rolePartnerLabel: "parceiro",
    roleAdminLabel: "admin",

    loggingOut: "A terminar sess√£o...",
    loading: "A carregar...",
    dashboardTitle: "Painel",
    dashboardWelcome: "Bem-vindo(a) √† sua √°rea de cliente",
    btnInvoices: "Faturas",
    btnNewRequest: "Novo pedido",

    statOpenRequests: "Pedidos em aberto",
    statValidatedTransports: "Transportes validados",
    statTotalRevenue: "Receita total",
    statAllRequests: "Todos os meus pedidos",

    tabOverview: "Resumo",
    tabRequests: "Os meus pedidos",
    tabInvoices: "As minhas faturas",

    sectionMyTransports: "Os meus transportes",
    sectionMyTransportsDesc: "Acompanhe os seus transportes recentes",
    sectionStats: "Estat√≠sticas",

    statusPending: "Pendente",
    statusValidated: "Validado",
    statusApproved: "Aprovado",
    statusInProgress: "Em curso",
    statusCompleted: "Conclu√≠do",
    profilePersonalInfo: "Informa√ß√µes pessoais",
    profileSecurity: "Seguran√ßa",
    labelCityZip: "Cidade / C√≥digo postal",
    labelVatNumber: "N√∫mero de IVA",

    securityChangeCredentials: "Alterar email / palavra-passe",
    securityConfirmEmailPrompt: "Confirme o seu email",
    securityCurrentPasswordPrompt: "Palavra-passe atual",
    securityNewPasswordPrompt: "Nova palavra-passe",
    securityUpdateSuccess: "Atualiza√ß√£o bem-sucedida",
    securityUpdateErrorPrefix: "Erro:",

    saveChanges: "Guardar altera√ß√µes",
    savingChanges: "A guardar...",
    newRequestTitle: "Novo pedido",

    pickupAddressLabel: "Morada de recolha",
    destinationAddressLabel: "Morada de destino",
    packageTypeLabel: "Tipo de volumes",
    heightCm: "Altura (cm)",
    widthCm: "Largura (cm)",
    depthCm: "Profundidade (cm)",
    weightKg: "Peso (kg)",
    pickupDateLabel: "Data de recolha",
    deliveryDateLabel: "Data de entrega",
    attachImageOptional: "Anexar imagem (opcional)",

    addressPlaceholder: "Morada completa",
    packageTypePlaceholder: "ex.: palete, caixa, contentor‚Ä¶",

    btnCalcDistancePrice: "Calcular dist√¢ncia e pre√ßo",
    btnCalculating: "A calcular...",
    btnCreateRequest: "Criar pedido",

    summaryTitle: "Resumo",
    summaryDistance: "Dist√¢ncia",
    summaryVolume: "Volume",
    summaryEstimatedPrice: "Pre√ßo estimado",

    toastUserNotConnected: "Utilizador n√£o autenticado",
    toastRouteError: "Erro ao calcular o trajeto",
    toastCreatedSuccess: "üéâ O seu pedido foi criado! Pode acompanh√°-lo no separador Os meus transportes.",
    toastCreateError: "Erro ao criar o pedido",

    errPickupRequired: "A morada de recolha √© obrigat√≥ria",
    errDestinationRequired: "A morada de destino √© obrigat√≥ria",
    errPackageTypeRequired: "O tipo de volume √© obrigat√≥rio",
    errHeightMin: "A altura deve ser superior a 0",
    errWidthMin: "A largura deve ser superior a 0",
    errDepthMin: "A profundidade deve ser superior a 0",
    errWeightMin: "O peso deve ser superior a 0",
    myTransportsTitle: "Os meus transportes",
    newTransportBtn: "Novo transporte",

    emptyTitle: "Sem transportes",
    emptyDesc: "Ainda n√£o tem pedidos de transporte.",
    emptyCta: "Criar o meu primeiro pedido",

    transportNumberPrefix: "Transporte #",
    labelDeparture: "Partida",
    labelArrival: "Chegada",
    labelType: "Tipo:",
    labelWeight: "Peso:",
    labelDistance: "Dist√¢ncia:",
    labelPrice: "Pre√ßo:",
    createdOn: "Criado em",
    follow: "Acompanhar",
    details: "Detalhes",
    notSpecified: "N√£o especificado",

    statusQuoted: "Or√ßamentado",
    statusAccepted: "Aceite",
    statusDelivered: "Entregue",
    statusCancelled: "Cancelado",
    clientRequestsTitle: "Os meus pedidos",
    labelStatus: "Estado:",
    viewDetails: "Ver detalhes",
    toastRequestsLoadError: "Erro ao carregar os pedidos",



  },
};

type Ctx = { lang: Lang; setLang: (l: Lang) => void; t: Record<string, string> };
const TranslationContext = createContext<Ctx | null>(null);

export const TranslationProvider: React.FC<React.PropsWithChildren> = ({ children }) => {
  const [lang, setLang] = useState<Lang>(() => (localStorage.getItem(LANG_STORAGE_KEY) as Lang) || 'fr');

  useEffect(() => localStorage.setItem(LANG_STORAGE_KEY, lang), [lang]);

  const t = useMemo(() => {
  const handler: ProxyHandler<Record<string, string>> = {
    get: (_target, prop: string | symbol) => {
      const key = String(prop);
      return DICT[lang]?.[key] ?? key;
    },
  };
  return new Proxy({} as Record<string, string>, handler);
}, [lang]);

  const value = useMemo(() => ({ lang, setLang, t }), [lang, t]);
  return <TranslationContext.Provider value={value}>{children}</TranslationContext.Provider>;
};

export const useI18n = () => {
  const ctx = useContext(TranslationContext);
  if (!ctx) throw new Error('useI18n must be used within <TranslationProvider>');
  return ctx;
};
